## coding=utf-8
<%namespace name='static' file='static_content.html'/>
<%!
from django.utils.translation import ugettext as _
from openedx.core.lib.js_utils import (
    escape_json_dumps, escape_js_string
)
%>
<!doctype html>
<!--[if lte IE 9]><html class="ie9 lte9" lang="${LANGUAGE_CODE}"><![endif]-->
<!--[if !IE]><<!--><html lang="${LANGUAGE_CODE}"><!--<![endif]-->
  <head dir="${static.dir_rtl()}">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	  <!-- OneTrust Cookies Consent Notice start -->
    <script type="text/javascript" src="https://cookie-cdn.cookiepro.com/consent/7bc9e667-f406-4710-9f22-58e22b545c65/OtAutoBlock.js"></script>
    <script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="7bc9e667-f406-4710-9f22-58e22b545c65"></script>
    <script type="text/javascript">
        function OptanonWrapper() { }
    </script>
    <!-- OneTrust Cookies Consent Notice end -->
    <title>
        <%block name="title"></%block> |
        % if context_course:
        <% ctx_loc = context_course.location %>
        ${context_course.display_name_with_default_escaped | h} |
        % elif context_library:
        ${context_library.display_name_with_default_escaped | h} |
        % endif
        ${settings.STUDIO_NAME}
    </title>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="path_prefix" content="${EDX_ROOT_URL}">

    <%static:css group='style-vendor'/>
    <%static:css group='style-vendor-tinymce-content'/>
    <%static:css group='style-vendor-tinymce-skin'/>
    <%static:css group='style-main'/>

    <%include file="widgets/segment-io.html" />

    <%block name="header_extras"></%block>
  </head>

  <body class="${static.dir_rtl()} <%block name='bodyclass'></%block> lang_${LANGUAGE_CODE}">
    <%block name="view_notes"></%block>

    <a class="nav-skip" href="#content">${_("Skip to main content")}</a>

    <script type="text/javascript">
      window.baseUrl = "${escape_js_string(settings.STATIC_URL) | n}";
      var require = {baseUrl: window.baseUrl};
    </script>
    <script type="text/javascript" src="${static.url("js/vendor/require.js")}"></script>
    <script type="text/javascript" src="${static.url("cms/js/require-config.js")}"></script>

    <!-- view -->
    <div class="wrapper wrapper-view" dir="${static.dir_rtl()}">
        <% online_help_token = self.online_help_token() if hasattr(self, 'online_help_token') else None %>
        <%include file="widgets/header.html" args="online_help_token=online_help_token" />

      <div id="page-alert">
      <%block name="page_alert"></%block>
      </div>

      <div id="content">
      <%block name="content"></%block>
      </div>

      % if user.is_authenticated():
        <%include file="widgets/sock.html" args="online_help_token=online_help_token" />
      % endif
      <%include file="widgets/footer.html" />

      <div id="page-notification"></div>
    </div>

    <div id="page-prompt"></div>

    <%block name="modal_placeholder"></%block>

    <%block name="jsextra"></%block>
    <script type="text/javascript">
      require(['common/js/common_libraries'], function () {
          // If you are rebasing take there's this bit was hacked to fix an issue that must fix by the rebase https://app.asana.com/0/15875049854186/230573008666419
          require(['js/factories/base'], function () {
              require(['js/factories/course'], function(CourseFactory) {
                  % if context_course:
                      CourseFactory({
                          id: "${escape_js_string(context_course.id) | n}",
                          name: "${context_course.display_name_with_default_escaped | h}",
                          url_name: "${context_course.location.name | h}",
                          org: "${context_course.location.org | h}",
                          num: "${context_course.location.course | h}",
                          display_course_number: "${_(context_course.display_number_with_default)}",
                          revision: "${context_course.location.revision | h}",
                          self_paced: ${escape_json_dumps(context_course.self_paced) | n}
                      });
                  % endif

                  % if user.is_authenticated():
                      require(['js/sock']);
                  % endif
                  <%block name='requirejs'></%block>
              });
          });
      });
    </script>
    <%include file="widgets/segment-io-footer.html" />
    <div class="modal-cover"></div>

    <%include file="mathjax_arabic_config.html" />
  </body>
</html>
